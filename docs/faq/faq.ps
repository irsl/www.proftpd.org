%!PS-Adobe-3.0
%%BoundingBox: 0 0 595 792
%%LanguageLevel: 2
%%Creator: htmldoc 1.8.23 Copyright 1997-2002 Easy Software Products, All Rights Reserved.
%%CreationDate: D:20040227172342+0000
%%Title: Professional FTP Daemon FAQ
%%Generator: Modular DocBook HTML Stylesheet Version 1.7
%%Pages: 28
%%DocumentNeededResources:
%%+ font Courier
%%+ font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Times-BoldItalic
%%+ font Helvetica
%%+ font Helvetica-Bold
%%+ font Symbol
%%DocumentData: Clean7bit
%%EndComments
%%BeginProlog
%%BeginResource: procset htmldoc-page 1.8 22
/BD{bind def}bind def/B{dup 0 exch rlineto exch 0 rlineto neg 0 exch rlineto
closepath stroke}BD/C{setrgbcolor}BD
/CM{concat}BD/DF{findfont dup length dict begin{1 index/FID ne{def}{pop pop}
ifelse}forall/Encoding fontencoding def currentdict end definefont pop}BD
/F{dup 0 exch rlineto exch 0 rlineto neg 0 exch rlineto closepath fill}BD
/FS{/hdFontSize exch def}BD/GS{gsave}BD/GR{grestore}BD/J{0 exch ashow}BD
/L{0 rlineto stroke}BD/M{moveto}BD/RO{rotate}BD/S{show}BD/SC{dup scale}BD
/SF{findfont hdFontSize scalefont setfont}BD/SP{showpage}BD/T{translate}BD
%%EndResource
/fontencoding[
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent/ampersand
/quotesingle/parenleft/parenright/asterisk/plus/comma/minus/period/slash/zero
/one/two/three/four/five/six/seven/eight/nine/colon/semicolon/less/equal/greater
/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft
/backslash/bracketright/asciicircum/underscore/grave/a/b/c/d/e/f/g/h/i/j/k/l/m/n
/o/p/q/r/s/t/u/v/w/x/y/z/braceleft/bar/braceright/asciitilde/.notdef/Euro
/.notdef/quotesinglbase/florin/quotedblbase/ellipsis/dagger/daggerdbl/circumflex
/perthousand/Scaron/guilsinglleft/OE/.notdef/.notdef/.notdef/.notdef/quoteleft
/quoteright/quotedblleft/quotedblright/bullet/endash/emdash/tilde/trademark
/scaron/guilsinglright/oe/.notdef/.notdef/Ydieresis/space/exclamdown/cent
/sterling/currency/yen/brokenbar/section/dieresis/copyright/ordfeminine
/guillemotleft/logicalnot/hyphen/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guillemotright/onequarter/onehalf/threequarters/questiondown
/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute
/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve
/Oacute/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex
/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex
/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/F0/Courier DF
/F4/Times-Roman DF
/F5/Times-Bold DF
/F6/Times-Italic DF
/F7/Times-BoldItalic DF
/F8/Helvetica DF
/F9/Helvetica-Bold DF
/Fc/Symbol findfont definefont pop
%%EndProlog
%%Page: 1 1
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 371.4 M 487.0 2.0 F
0 224.2 M 487.0 2.0 F
0 132.2 M 487.0 2.0 F
20 FS/F9 SF 0 678 M(Professional FTP Daemon FAQ)S
14 FS/F9 SF 0 646.8 M(Mark Lowes)S
11 FS/F0 SF 0 619.8 M(<hamster@vom.org.uk>)S
/F4 SF 0 593.4 M(Copyright \251 1999-2004 Mark Lowes)S
/F5 SF 0 553.8 M(Copyrights and Trademarks)S
/F4 SF 0 527.4 M(This document may be reproduced in whole or in part, without fee, subject to the following restrictions:)S
36 501 M(The copyright notice above and this permission notice must be preserved complete on all complete or)S
36 487.8 M(partial copies)S
25 501 M(1. )S
36 474.6 M(Any translation or derived work must be approved by the author in writing before distribution.)S
25 474.6 M(2. )S
36 461.4 M(If you distribute this work in part, instructions for obtaining the complete version of this manual must)S
36 448.2 M(be included, and a means for obtaining a complete version provided.)S
25 461.4 M(3. )S
36 435 M(Small portions may be reproduced as illustrations for reviews or quotes in other works without this)S
36 421.8 M(permission notice if proper citation is given.)S
25 435 M(4. )S
0 395.4 M(Exceptions to these rules may be granted for academic purposes: Write to the author and ask. These)S
0 382.2 M(restrictions are here to protect us as authors, not to restrict you as learners and educators.)S
/F7 SF 0 340.6 M(Table of Contents)S
/F6 SF 0 327.4 M(Preface)S
0 314.2 M(1. Introduction to ProFTPD)S
0 301 M(2. Compilation and installing)S
0 287.8 M(3. Compatibility and Integration)S
0 274.6 M(4. Common Running problems)S
0 261.4 M(5. Configuration problems)S
0 248.2 M(6. Security)S
0 235 M(7. User Authentication)S
20 FS/F9 SF 0 197.6 M(Preface)S
11 FS/F4 SF 36 156.2 M(This document sets out many of the FAQs related to the installation, functioning and)S
36 143 M(configuration of ProFTPD. It also provides some guidance on policy and security issues.)S
20 FS/F9 SF 0 105.6 M(Chapter 1. Introduction to ProFTPD)S
11 FS/F6 SF 0 77.4 M(1. What is ProFTPD?)S
0 64.2 M(2. Website & documentation)S
0 51 M(3. Bug reporting)S
0 37.8 M(4. I've found a security hole)S
0 24.6 M(5. Downloading)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 1. Introduction to ProFTPD)S
480.884 0 M(1)S
GR
SP
%%Page: 2 2
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(6. Mailing lists)S
0 673.8 M(7. Copyright Issues)S
/F5 SF 0 647.4 M(1.)S
/F4 SF ( What is ProFTPD?)S
0 621 M(ProFTPD is a ftp server written for use on Unix and Unix-a-like operating systems, there is no support for)S
0 607.8 M(native use under Microsoft Windows.)S
/F5 SF 0 581.4 M(2.)S
/F4 SF ( Website & documentation)S
0 555 M(http://www.proftpd.org/ is the primary source for all information about the project including documentation)S
0 541.8 M(and security alerts. There are a number of geographic mirror sites, see the mirror pages on www.proftpd.org)S
0 528.6 M(for more details or try www.<isocode>.proftpd.org \(ie www.uk.proftpd.org\).)S
/F5 SF 0 502.2 M(3.)S
/F4 SF ( Bug reporting)S
0 475.8 M(Bug reports should be made via http://bugs.proftpd.org/ which uses the bugzilla tracking system. Patches)S
0 462.6 M(should be attached to the appropriate bug and not mailed directly to the mailing lists or any given team)S
0 449.4 M(member.)S
/F5 SF 0 423 M(4.)S
/F4 SF ( I've found a security hole)S
0 396.6 M(Please report all security problems with the code to )S
/F0 SF (<security@proftpd.org>)S
/F4 SF ( before releasing the)S
0 383.4 M(information into the public domain. It would be appreciated if you give the core team a few days to put)S
0 370.2 M(together a patch and/or new release to address the issue.)S
0 343.8 M(Please adhere to the proceedures and timescales given in the RF Policy document)S
0 330.6 M(http://www.wiretrip.net/rfp/policy.html, this will give the core development team a chance to get a fix or)S
0 317.4 M(workaround in place before the problem becomes fully public domain.)S
/F5 SF 0 291 M(5.)S
/F4 SF ( Downloading)S
0 264.6 M(There are two main methods of getting the software. Downloading a compressed tarball or rpm \(there is also a)S
0 251.4 M(Debian package available in the main distribution\) from proftpd.org or from a mirror site, alternatively if you)S
0 238.2 M(wish to run the latest bleeding edge code then collecting from the cvs server is the best method.)S
14 FS/F9 SF 36 195.6 M(Mirror sites)S
11 FS/F4 SF 36 168.6 M(There is a complete and maintained list of ftp mirror sites available from)S
36 155.4 M(http://www.proftpd.org/download.html)S
14 FS/F9 SF 36 126 M(CVS)S
11 FS/F4 SF 36 99 M(cvs -d :pserver:anonymous@cvs.proftp.sourceforge.net:/cvsroot/proftp login \(Hit Enter when)S
36 85.8 M(prompted for a password.\))S
36 59.4 M(Then do:)S
36 33 M(cvs -d :pserver:anonymous@cvs.proftp.sourceforge.net:/cvsroot/proftp -z3 co proftpd)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Mirror sites)S
480.884 0 M(2)S
GR
SP
%%Page: 3 3
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(To obtain the latest/greatest updates, just hop into the proftpd directory and do: cvs update)S
36 660.6 M(A couple of sites generate downloadable tarballs of the latest CVS code to make obtaining the)S
36 647.4 M(test code easier.)S
/F5 SF 0 621 M(6.)S
/F4 SF ( Mailing lists)S
0 594.6 M(There are a number of mailing lists for ProFTPD)S
14 FS/F9 SF 36 552 M(Announce)S
11 FS/F4 SF 36 525 M(proftpd-announce@proftpd.org)S
36 498.6 M(This is a very low traffic list where only ProFTPD announcements/changes will be)S
36 485.4 M(announced. Subscribe by sending a message to)S
/F0 SF 36 472.2 M(<proftpd-announce-request@proftpd.org>)S
/F4 SF ( with "subscribe" in the subject.)S
36 445.8 M(Web interface: https://lists.sourceforge.net/lists/listinfo/proftp-announce)S
14 FS/F9 SF 36 416.4 M(Users)S
11 FS/F4 SF 36 389.4 M(proftp-user@proftpd.org)S
36 363 M(This is intended to the the user support channel for the software, in most likelihood this is)S
36 349.8 M(going to be a high traffic list and slightly chatty. Please read the FAQ, the documentation and)S
36 336.6 M(the list archives before posting a question.)S
36 310.2 M(Subscribe by sending a message to )S
/F0 SF (<proftpd-user-request@proftpd.org>)S
/F4 SF ( with)S
36 297 M("subscribe" in the subject.)S
36 270.6 M(Web interface: https://lists.sourceforge.net/lists/listinfo/proftp-user)S
14 FS/F9 SF 36 241.2 M(Development)S
11 FS/F4 SF 36 214.2 M(proftpd-devel@proftpd.org)S
36 187.8 M(This list is intended for discussion of development-related issues of ProFTPD, and feature)S
36 174.6 M(design. It is NOT intended to be a "user help" group.)S
36 148.2 M(Subscribe by sending a message to )S
/F0 SF (<proftpd-devel-request@proftpd.org>)S
/F4 SF ( with)S
36 135 M("subscribe" in the subject.)S
36 108.6 M(Web interface: https://lists.sourceforge.net/lists/listinfo/proftp-devel)S
14 FS/F9 SF 36 79.2 M(Archives)S
11 FS/F4 SF 36 52.2 M(The mailing list archives can be found at:)S
72 25.8 M(http://www.proftpd.org/proftpd-announce-archive/)S
/Fc SF 60.967 25.8 M(\250 )S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Announce)S
480.884 0 M(3)S
GR
SP
%%Page: 4 4
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 487.8 M 487.0 2.0 F
11 FS/F4 SF 72 687 M(http://www.proftpd.org/proftpd-l-archive/)S
/Fc SF 60.967 687 M(\250 )S
/F4 SF 72 673.8 M(http://www.proftpd.org/proftpd-devel-archive/)S
/Fc SF 60.967 673.8 M(\250 )S
14 FS/F9 SF 36 657.6 M(Unsubscribing)S
11 FS/F4 SF 36 630.6 M(Before posting to any of the lists or mailing the list admins please try and remove yourself)S
36 617.4 M(first. Either by emailing <listname>-request@lists.sourceforge.net with the subject)S
36 604.2 M("unsubscribe" or visiting the web interface and unsubscribing from there.)S
36 577.8 M(I've \(lost / never had\) a password to the interface. Easy, enter the address you are subscribed)S
36 564.6 M(to the list as into the form and hit the "email me my password" button.)S
/F5 SF 0 538.2 M(7.)S
/F4 SF ( Copyright Issues)S
0 511.8 M(The software is currently distributed under the GNU General Public License \(version 2 or later\) as published)S
0 498.6 M(by the Free Software Foundation. Copyright is held by Public Flood Software.)S
20 FS/F9 SF 0 461.2 M(Chapter 2. Compilation and installing)S
11 FS/F6 SF 0 433 M(1. What platforms will it compile on?)S
0 419.8 M(2. CVS)S
0 406.6 M(3. How do I get debug output)S
0 393.4 M(4. Patches)S
0 380.2 M(5. Using non-default modules)S
0 367 M(6. New features/modules)S
/F5 SF 0 340.6 M(1.)S
/F4 SF ( What platforms will it compile on?)S
0 314.2 M(ProFTPD has been reported as compiling and running on Linux, all BSD variants, Solaris and a number of)S
0 301 M(other similar operating systems.)S
/F5 SF 0 274.6 M(2.)S
/F4 SF ( CVS)S
0 248.2 M(CVS \(Concurrent Versions System\), is a version control system which allows multiple developers \(scattered)S
0 235 M(across the same room or across the world\) to maintain a single codebase and keep a record of all changes to)S
0 221.8 M(the work.)S
0 195.4 M(The CVS repository for ProFTPD is available for non-developers in read-only mode, however this code is)S
0 182.2 M(right on the bleeding edge and is not guaranteed to even compile let alone work. Access to CVS is given to)S
0 169 M(allow important security patches out into the wild and to allow users and interested users to test out the latest)S
0 155.8 M(changes on real systems.)S
0 129.4 M(Nightly tarballs of the current CVS are available on ftp.proftpd.org, these are built at approx 1am UK time.)S
14 FS/F9 SF 36 86.8 M(Recommended ~/.cvsrc settings)S
9 FS/F0 SF 36 61.8 M(cvs -z 3)S
36 51 M(update -Pd)S
36 40.2 M(diff -u)S
11 FS/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 2. Compilation and installing)S
480.884 0 M(4)S
GR
SP
%%Page: 5 5
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 120.6 M 487.0 2.0 F
14 FS/F9 SF 36 684 M(Where can I get information on cvs?)S
11 FS/F4 SF 36 657 M(CVS is produced by Cyclic Software \(http://www.cyclic.com/\) and details on CVS can be)S
36 643.8 M(found on their website. The CVS documentation is clear, detailed and above all heavy when)S
36 630.6 M(printed. I'd recommend reading it if you're planning on using CVS a lot.)S
/F5 SF 0 604.2 M(3.)S
/F4 SF ( How do I get debug output)S
0 577.8 M(The easiest way is to fire up proftpd manually from the command line with the debug level cranked up.)S
9 FS/F0 SF 0 553.4 M(/usr/local/sbin/proftpd -d9 -n)S
11 FS/F4 SF 0 516.6 M(This will result in maximal debug output direct to the console. Warning, this can get messy on a busy server,)S
0 503.4 M(for testing I would suggest copying the config and altering the port the server binds to and then testing.)S
/F5 SF 0 477 M(4.)S
/F4 SF ( Patches)S
0 450.6 M(Any patches should be submitted in Universal format, this makes integrating them into the main cvs source a)S
0 437.4 M(lot easier. When generating a diff against the current cvs source use "cvs diff -uw" to generate the patch.)S
9 FS/F0 SF 0 413 M(cvs diff -u filename > filename.patch)S
0 391.4 M(  or)S
0 369.8 M(cvs diff -u > bigger.patch)S
11 FS/F4 SF 0 333 M(Patches that add configuration directives without proper documentation. Will be rejected. New features)S
0 319.8 M(without documentation are less than useless to the community at large.)S
/F5 SF 0 293.4 M(5.)S
/F4 SF ( Using non-default modules)S
0 267 M(Simply configure ProFTPD with)S
9 FS/F0 SF 0 242.6 M(./configure --with-modules=mod_module1:mod_module2:mod_module3)S
0 231.8 M(make)S
0 221 M(make install)S
11 FS/F5 SF 0 184.2 M(6.)S
/F4 SF ( New features/modules)S
0 157.8 M(While anything new is welcomed it's probably better to at least float the idea first on the devel mailing list to)S
0 144.6 M(ensure that someone else isn't already hacking on it. Also when submitting the patch or module for inclusion)S
0 131.4 M(into the ProFTPD source full documentation is needed.)S
20 FS/F9 SF 0 94 M(Chapter 3. Compatibility and Integration)S
11 FS/F6 SF 0 65.8 M(1. SQL)S
0 52.6 M(2. SSH)S
0 39.4 M(3. sendfile\(\))S
0 26.2 M(4. IPv6)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 3. Compatibility and Integration)S
480.884 0 M(5)S
GR
SP
%%Page: 6 6
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(5. Filename case sensitivity)S
0 673.8 M(6. FXP)S
/F5 SF 0 647.4 M(1.)S
/F4 SF ( SQL)S
0 621 M(ProFTPD has support for authentication and logging via SQL databases using the mod_sql module as supplied)S
0 607.8 M(in the main distribution.)S
/F5 SF 0 581.4 M(2.)S
/F4 SF ( SSH)S
0 555 M(There is a mini-HOWTO at http://www.castaglia.org/proftpd/doc/ detailing how to tunnel ftp connections)S
0 541.8 M(over ssh.)S
/F5 SF 0 515.4 M(3.)S
/F4 SF ( sendfile\(\))S
0 489 M(sendfile\(\) is a system call which streamlines the copying of data between the disk and the tcp socket. The call)S
0 475.8 M(copied from the page cache directly rather than requiring a kernel -> user space -> kernel space copy for)S
0 462.6 M(every read\(\) and write\(\) call. Generally the advantages are only felt on heavily loaded servers. The call is)S
0 449.4 M(supported in ProFTPD for Linux and FreeBSD.)S
14 FS/F9 SF 36 406.8 M(Linux 2.0.x)S
11 FS/F4 SF 36 379.8 M(sendfile is not supported under 2.0.x, this is not an issue when compiling for 2.0.x on a 2.0.x)S
36 366.6 M(system. However when compiling on a 2.2.x system for use on 2.0.x use the)S
36 353.4 M(--disable-sendfile flag.)S
14 FS/F9 SF 36 324 M(Runtime detection of sendfile\(\))S
11 FS/F4 SF 36 297 M(Johnie Ingram \(aka netgod\)'s:)S
36 283.8 M(http://www.proftpd.org/proftpd-devel-archive/99-10/msg00073.html)S
36 257.4 M(John Pierce <hawkfan@pyrotechnics.com>)S
36 244.2 M(http://www.proftpd.org/proftpd-devel-archive/99-10/msg00112.html)S
14 FS/F9 SF 36 214.8 M(Problems with sendfile)S
11 FS/F4 SF 36 187.8 M(There appear to be a number of problems with sendfile\(\) particularly with the directives and)S
36 174.6 M(features which require accurate determination of filesize. Such as the Rate* functions and)S
36 161.4 M(downloading large files, the best advice at the moment appears to be to disable sendfile by)S
36 148.2 M(default \( --disable-sendfile \).)S
36 121.8 M(Sendfile\(\) also appears to be the source of a number of file corruption problems.)S
/F5 SF 0 95.4 M(4.)S
/F4 SF ( IPv6)S
0 69 M(There is currently no official support for IPv6 within the 1.2.x code tree, however there is an)S
0 55.8 M(http://www.t17.ds.pwr.wroc.pl/~misiek/ipv6/ and more comprehensive support will probably be developed)S
0 42.6 M(during the 1.3.x development cycle.)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Linux 2.0.x)S
480.884 0 M(6)S
GR
SP
%%Page: 7 7
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 465 M 487.0 2.0 F
11 FS/F5 SF 0 687 M(5.)S
/F4 SF ( Filename case sensitivity)S
0 660.6 M(ProFTPD is utterly dependant on the underlying OS to handle filename case sensitivity. If the underlying OS)S
0 647.4 M(is case sensitive then ProFTPD will be, there are currently no plans for a module to handle this.)S
/F5 SF 0 621 M(6.)S
/F4 SF ( FXP)S
0 594.6 M(FXP is capable of bouncing data between websites. There have been a number of reports of problems in)S
0 581.4 M(configuring ProFTPD to function cleanly with this program \(http://flashfxp.skuz.net/\).)S
0 555 M(To support FXP when connecting as a user place "AllowForeignAddress on" in the Global or VirtualHost)S
0 541.8 M(context.)S
0 515.4 M(To support FXP when connecting as anon "AllowForeignAddress on" must be placed in the Anonymous)S
0 502.2 M(context.)S
0 475.8 M(The config will happily support "AllowForeignAddress on" in multiple places within the config.)S
20 FS/F9 SF 0 438.4 M(Chapter 4. Common Running problems)S
11 FS/F6 SF 0 410.2 M(1. ProFTPD doesn't seem to work.)S
0 397 M(2. "inet_create_connection\(\) failed: Operation not permitted".)S
0 383.8 M(3. Unable to bind to port/Address already in use)S
0 370.6 M(4. "\(Login failed\): Invalid shell")S
0 357.4 M(5. "Fatal: Socket operation on non-socket")S
0 344.2 M(6. "Fatal: unable to determine IP address of "hostname:)S
0 331 M(7. I'm having problems with FTP clients behind firewalls)S
0 317.8 M(8. Can I run more that one VirtualHost on a single IP?)S
0 304.6 M(9. How do I run ProFTPD from inetd?)S
0 291.4 M(10. Can I use tcp-wrappers with ProFTPD?)S
0 278.2 M(11. Can I run an FTP server on a non-standard port?)S
0 265 M(12. Can control upload/download ratios?)S
0 251.8 M(13. Slow logins)S
0 238.6 M(14. Lots of "FTP session closed" messages)S
0 225.4 M(15. How do I see who is connected?)S
0 212.2 M(16. Can I force ProFTPD to listen on only one IP?)S
0 199 M(17. "FTP server shut down ... please try again later.")S
0 185.8 M(18. How do I shutdown the server without killing proftpd?)S
0 172.6 M(19. Is is possible to shutdown a single VirtualHost?)S
0 159.4 M(20. How do I restart/reload the server?)S
0 146.2 M(21. 503 No PORT command issued)S
0 133 M(22. Fatal: unable to determine IP address of)S
0 119.8 M(23. 451 append/restart not permitted, try again)S
0 106.6 M(24. 501 REST not compatible with server configuration)S
0 93.4 M(25. The time being displayed is wrong)S
0 80.2 M(26. Corrupted files)S
0 67 M(27. Can I upgrade ProFTPD without terminating the current sessions?)S
0 53.8 M(28. No such group "nogroup")S
0 40.6 M(29. Why do I see "unable to set groups: Invalid argument"?)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 4. Common Running problems)S
480.884 0 M(7)S
GR
SP
%%Page: 8 8
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F5 SF 0 687 M(1.)S
/F4 SF ( ProFTPD doesn't seem to work.)S
0 660.6 M(Starting ProFTPD in standalone mode it doesn't show in "ps" It could be many things, possibly something like)S
0 647.4 M(not running ProFTPD as root \(it needs to be run as root initially, but will switch to a non-privileged user\).)S
0 634.2 M(Regardless, ProFTPD logs all errors via the standard syslog mechanism. You need to check your system logs)S
0 621 M(in order to determine what the problem is.)S
14 FS/F9 SF 36 578.4 M(It doesn't work!)S
11 FS/F4 SF 36 551.4 M(There are many times when there's a completely random problem which appears to be)S
36 538.2 M(insoluble. The best place to ask for help is definately the mailing list \(proftpd-l\) but it's not)S
36 525 M(productive to ask for help without giving enough information for intelligent debugging.)S
36 498.6 M(Have you?)S
72 472.2 M(Checked your logs)S
/Fc SF 60.967 472.2 M(\250 )S
/F4 SF 72 459 M(Tried the server in debug mode)S
/Fc SF 60.967 459 M(\250 )S
/F4 SF 72 445.8 M(Read the FAQ?)S
/Fc SF 60.967 445.8 M(\250 )S
/F4 SF 72 432.6 M(Checked the mailing list archive?)S
/Fc SF 60.967 432.6 M(\250 )S
/F4 SF 72 419.4 M(Are you running the latest version?)S
/Fc SF 60.967 419.4 M(\250 )S
/F4 SF 0 393 M(When posting try giving enough information, this might include but not be limited to.)S
36 366.6 M(OS and server version \(proftpd -vv\))S
/Fc SF 28.19 366.6 M(\267 )S
/F4 SF 36 353.4 M(List of included modules \(proftpd -l\))S
/Fc SF 28.19 353.4 M(\267 )S
/F4 SF 36 340.2 M(Appropriate log extracts)S
/Fc SF 28.19 340.2 M(\267 )S
/F4 SF 36 327 M(Output fom debug mode)S
/Fc SF 28.19 327 M(\267 )S
/F4 SF 36 313.8 M(Configration fragment)S
/Fc SF 28.19 313.8 M(\267 )S
/F5 SF 0 287.4 M(2.)S
/F4 SF ( "inet_create_connection\(\) failed: Operation not permitted".)S
0 261 M(You aren't starting ProFTPD as root, or you have inetd configured to run ProFTPD as a user other than root.)S
0 247.8 M(The ProFTPD daemon must be started as root in order to bind to tcp ports lower than 1024, or to open your)S
0 234.6 M(shadow password file when authenticating users. The daemon switches uid/gids to the user and group)S
0 221.4 M(specified by the User/Group directives during normal operation, so a "ps" will show it running as the user you)S
0 208.2 M(specified.)S
/F5 SF 0 181.8 M(3.)S
/F4 SF ( Unable to bind to port/Address already in use)S
0 155.4 M(0.0.0.0 is INADDR_ANY, which means to bind to any interface. The "address in use" will normally mean)S
0 142.2 M(that something has already bound to that address.)S
0 115.8 M(Under linux it is possible to run:)S
9 FS/F0 SF 0 91.4 M(fuser -n tcp 21)S
11 FS/F4 SF 0 54.6 M(to get the PID of the process currently bound to port ProFTPD is configured to run as.)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(It doesn't work!)S
480.884 0 M(8)S
GR
SP
%%Page: 9 9
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The most common cause is that ProFTPD is configured standalone and inetd is still configured for port 21.)S
0 673.8 M(Comment out the line starting "ftp" in /etc/inetd.conf and restart \(killall -HUP inetd or something similar)S
0 660.6 M(should do the trick\) and try again.)S
/F5 SF 0 634.2 M(4.)S
/F4 SF ( "\(Login failed\): Invalid shell")S
0 607.8 M(The user attempting to login has been given a shell that is not listed in the system's /etc/shells file. By default,)S
0 594.6 M(proftpd will require that users logging in have valid shells. Use the RequireValidShell directive to turn off this)S
0 581.4 M(requirement:)S
9 FS/F0 SF 0 557 M(RequireValidShell off)S
11 FS/F5 SF 0 520.2 M(5.)S
/F4 SF ( "Fatal: Socket operation on non-socket")S
0 493.8 M(You have ProFTPD configured to run in inetd mode rather than standalone. In this mode, ProFTPD expects)S
0 480.6 M(that it will be run from the inetd super-server, which implies that stdin/stdout will be sockets instead of)S
0 467.4 M(terminals. As a result, socket operations will fail and the above error will be printed. If you wish to run)S
0 454.2 M(ProFTPD from the shell, in standalone mode, you'll need to modify your proftpd.conf configuration file and)S
0 441 M(add or edit the ServerType directive to read:)S
9 FS/F0 SF 0 416.6 M(ServerType standalone)S
11 FS/F5 SF 0 379.8 M(6.)S
/F4 SF ( "Fatal: unable to determine IP address of "hostname:)S
0 353.4 M(The hosting machine has a poorly configured hostname setup to the point where the resolver library cannot)S
0 340.2 M(determine the IP from the name. Solutions include, fixing the DNS for the domain, fixing the hostname, fixing)S
0 327 M(the /etc/hosts file. Which one works for you will largely depend on your OS and exactly what is wrong.)S
/F5 SF 0 300.6 M(7.)S
/F4 SF ( I'm having problems with FTP clients behind firewalls)S
0 274.2 M(The FTP Specification defines that two sockets should be used for all communications. The first runs over)S
0 261 M(port 21 and is the control channel over which all commands and response codes are sent. Whenever data is)S
0 247.8 M(required to be transfered, for example for a file download, a directory listing etc etc. A second channel is)S
0 234.6 M(created on demand, this socket can take one of two forms.)S
14 FS/F9 SF 36 192 M(non-Passive)S
11 FS/F4 SF 36 165 M(The server end of the data socket uses port 20. This is nice and easy to work into a firewall)S
36 151.8 M(configuration.)S
14 FS/F9 SF 36 122.4 M(Passive)S
11 FS/F4 SF 36 95.4 M(The port at either end is dynamically allocated. This is virtually impossible to cater for in a)S
36 82.2 M(firewall configuration given that the port mapping will be different for every data connection.)S
36 55.8 M(The solution is to force the users to configure their clients to use the non-passive mode \(ie)S
36 42.6 M(port 20\))S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(non-Passive)S
480.884 0 M(9)S
GR
SP
%%Page: 10 10
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F5 SF 0 687 M(8.)S
/F4 SF ( Can I run more that one VirtualHost on a single IP?)S
0 660.6 M(No, or at least not in the HTTP/1.1 manner of virtual hosting. This is an inbuilt limitation of the current FTP)S
0 647.4 M(RFC., unlike the HTTP/1.1 spec there is no mechanism comparable to the "Host: foo.bar.com" HTTP header)S
0 634.2 M(for specifying which host the connection is for. Therefore the only method for determining which VirtualHost)S
0 621 M(the connection is destined for is by the destination IP.)S
0 594.6 M(The one exception to this is if you host multiple servers on the same IP but using different ports, however this)S
0 581.4 M(requires that the connecting client uses a non-standard port and therefore is probably not a good solution for)S
0 568.2 M(mass hosting.)S
14 FS/F9 SF 36 525.6 M(Is there anything in the pipeline to fix this?)S
11 FS/F4 SF 36 498.6 M(There is a draft standard http://search.ietf.org/internet-drafts/draft-ietf-ftpext-mlst-12.txt)S
36 485.4 M(with the IETF which extends and improves on the FTP specification including support for a)S
36 472.2 M(HOST command. However given that the IP crunch is coming from websites and not virtual)S
36 459 M(ftp servers this is unlikely to be pushed through any time soon.)S
/F5 SF 0 432.6 M(9.)S
/F4 SF ( How do I run ProFTPD from inetd?)S
0 406.2 M(Find the line in /etc/inetd.conf that looks something like this:)S
36 366.6 M(ftp stream tcp nowait root in.ftpd in.ftpd)S
0 340.2 M(Replace it with:)S
36 300.6 M(ftp stream tcp nowait root in.proftpd in.proftpd)S
0 274.2 M(Then, find your inetd process in the process listing and send it the SIGHUP signal so that it will rehash and)S
0 261 M(reconfigure itself. You may also need to add in.ProFTPD to hosts.allow on your system.)S
/F5 SF 0 234.6 M(10.)S
/F4 SF ( Can I use tcp-wrappers with ProFTPD?)S
0 208.2 M(Yup. Although ProFTPD has built-in IP access control \(see the Deny and Allow directives\), many admins)S
0 195 M(choose to consolidate IP access control in one place via in.tcpd. Just configure ProFTPD to run from inetd as)S
0 181.8 M(any other tcp-wrapper wrapped daemon and add the appropriate lines to hosts.allow/deny files.)S
0 155.4 M(If running ProFTPD in standalone mode, mod_wrap can be used to direct the server to use the normal)S
0 142.2 M(hosts.allow/deny files.)S
/F5 SF 0 115.8 M(11.)S
/F4 SF ( Can I run an FTP server on a non-standard port?)S
0 89.4 M(Yes. Use a <VirtualHost> block with your machine's FQDN \(Fully Qualified Domain Name\) or IP address,)S
0 76.2 M(and a Port directive inside the <VirtualHost> block. For example, if your host is named)S
0 63 M("myhost.mydomain.com" and you want to run an additional FTP server on port 2001, you would:)S
9 FS/F0 SF 0 38.6 M(...)S
0 27.8 M(<VirtualHost myhost.mydomain.com>)S
11 FS/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Is there anything in the pipeline to fix this?)S
474.768 0 M(10)S
GR
SP
%%Page: 11 11
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(Port 2001)S
0 678.2 M(...)S
0 667.4 M(</VirtualHost>)S
11 FS/F5 SF 0 630.6 M(12.)S
/F4 SF ( Can control upload/download ratios?)S
0 604.2 M(Yes the mod_ratio module provides for doing just this.)S
0 577.8 M(The ratio directives take four numbers: file ratio, initial file credit, byte ratio, and initial byte credit. Setting)S
0 564.6 M(either ratio to 0 disables that check.)S
0 538.2 M(The directives are HostRatio \(matches FQDN, wildcards allowed\), AnonRatio \(matches password entered at)S
0 525 M(login\), UserRatio \(accepts "*" for "any user"\), and GroupRatio.)S
9 FS/F0 SF 0 500.6 M(Ratios on                                    # enable module)S
0 489.8 M(UserRatio ftp 0 0 0 0)S
0 479 M(HostRatio master.debian.org 0 0 0 0          # leech access \(default\))S
0 468.2 M(GroupRatio proftpd 100 10 5 100000           # 100:1 files, 10 file cred 5:1 bytes, 100k byte cred)S
0 457.4 M(AnonRatio billg@microsoft.com 1 0 1 0        # 1:1 ratio, no credits)S
0 446.6 M(UserRatio * 5 5 5 50000                      # special default case)S
11 FS/F4 SF 0 409.8 M(This example is for someone who \(1\) has downloaded 1 file of 82k, \(2\) has uploaded nothing, \(3\) has a ratio)S
0 396.6 M(of 5:1 files and 5:1 bytes, \(4\) has 4 files and 17k credit remaining, and \(5\) is now changing directory to)S
0 383.4 M(/art/nudes/young/carla. The initial credit, not shown, was 5 files and 100k \(UserRatio * 5 5 5 100000\).)S
0 357 M(Version 2.0 and above of this module integrate with mod_sql.)S
14 FS/F9 SF 36 314.4 M(Limitations of mod_ratio)S
11 FS/F4 SF 36 287.4 M(It appears that the ratio limits in mod_ratio are only maintained on a per session basis and)S
36 274.2 M(there is no ongoing tracking of usage.)S
/F5 SF 0 247.8 M(13.)S
/F4 SF ( Slow logins)S
0 221.4 M(This is probably caused by a firewall or DNS timeout. By default ProFTPD will try to do both DNS and ident)S
0 208.2 M(lookups against the incoming connection. If these are blocked or excessively delayed a slower than normal)S
0 195 M(login will result. To turn off DNS and ident use:)S
9 FS/F0 SF 0 170.6 M(UseReverseDNS off)S
0 159.8 M(IdentLookups                    off)S
11 FS/F4 SF 0 123 M(IdentLookups and tcpwrappers ***)S
/F5 SF 0 96.6 M(14.)S
/F4 SF ( Lots of "FTP session closed" messages)S
0 70.2 M(Oct 7 12:30:48 salvage2 proftpd[8874]: FTP session closed. Oct 7 12:30:48 salvage2 proftpd[8874]: FTP)S
0 57 M(session closed. Oct 7 12:30:48 salvage2 proftpd[8874]: FTP session closed. Oct 7 12:30:48 salvage2)S
0 43.8 M(proftpd[8874]: FTP session closed.)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Limitations of mod_ratio)S
474.768 0 M(11)S
GR
SP
%%Page: 12 12
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(The above log extract is likely to be caused by a local monitoring system or a particularly aggressive DoS)S
0 673.8 M(attack. Most service monitoring systems try opening the ftp port on the target server to detect whether it is)S
0 660.6 M(active and running. Most of the time these tests are followed by an immediate "QUIT" or disconnection.)S
0 634.2 M(TCPdump/TCPshow on the server in question should show which machine on your network is is generating)S
0 621 M(these connections.)S
/F5 SF 0 594.6 M(15.)S
/F4 SF ( How do I see who is connected?)S
0 568.2 M(The ftpwho command lists the state of each ftp connection to the server and what it's current activity is.)S
0 555 M(However this does not detail the connection information on a virtual by virtual basis.)S
/F5 SF 0 528.6 M(16.)S
/F4 SF ( Can I force ProFTPD to listen on only one IP?)S
0 502.2 M(Sort, of it's not quite as clean as the socket binding under Apache but the principle works something like this.)S
14 FS/F9 SF 36 459.6 M(Standalone mode)S
11 FS/F4 SF 36 432.6 M(To listen on the primary IP of a host use the SocketBindTight directive)S
36 406.2 M(To listen on a interfaces which are not the primary host interface use the SocketBindTight)S
36 393 M(directive, place your server configuration in a <VirtualHost ftp.mydomain.com> block and)S
36 379.8 M(use "Port 0" for the main host configuration and and "Port 21" inside the VirtualHost block.)S
14 FS/F9 SF 36 350.4 M(inetd)S
11 FS/F4 SF 36 323.4 M(There are two approaches possible, the first is to use the patch from Daniel Roesen)S
36 310.2 M(<droesen@entire-systems.com> \(check the mailing list archives\).)S
36 283.8 M(The second method is to run ProFTPD from xinetd \(http://synack.net/xinetd/\), a more)S
36 270.6 M(advanced replacement of inetd. An entry for this in xinetd.conf would be something like this:)S
9 FS/F0 SF 36 246.2 M(service ftp)S
36 235.4 M({)S
36 224.6 M(        disable = no)S
36 213.8 M(        flags                   = REUSE)S
36 203 M(        socket_type             = stream)S
36 192.2 M(        wait                    = no)S
36 181.4 M(        user                    = root)S
36 170.6 M(        server                  = /usr/sbin/proftpd)S
36 159.8 M(        log_on_success          += DURATION USERID)S
36 149 M(        log_on_failure          += USERID)S
36 138.2 M(        nice                    = 10)S
36 127.4 M(        #bind                   = [IP to bind to])S
36 116.6 M(})S
11 FS/F5 SF 0 79.8 M(17.)S
/F4 SF ( "FTP server shut down ... please try again later.")S
0 53.4 M(Check for /etc/shutmsg and delete it.)S
/F5 SF 0 27 M(18.)S
/F4 SF ( How do I shutdown the server without killing proftpd?)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Standalone mode)S
474.768 0 M(12)S
GR
SP
%%Page: 13 13
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(ftpshut, allows the server to disallow connections with a message without actually taking down the service.)S
0 673.8 M(The shutdown can be scheduled for a point in the future or right now, existing connections can be allowed to)S
0 660.6 M(finish, or be terminated now. Re-enabling is done by removing the /etc/shutmsg file.)S
/F5 SF 0 634.2 M(19.)S
/F4 SF ( Is is possible to shutdown a single VirtualHost?)S
0 607.8 M(No, the shutmsg file works at a daemon level not at a virtual host level.)S
/F5 SF 0 581.4 M(20.)S
/F4 SF ( How do I restart/reload the server?)S
0 555 M(This depends on the mode you're running the server in.)S
14 FS/F9 SF 36 512.4 M(inetd)S
11 FS/F4 SF 36 485.4 M(Unless you're making a configuration change to inetd itself nothing needs doing. The server)S
36 472.2 M(reloads the configuration everytime a new connection is made.)S
14 FS/F9 SF 36 442.8 M(Standalone)S
11 FS/F4 SF 36 415.8 M(Either stop and start the server completely \(a little aggressive for most admins tastes\) or send)S
36 402.6 M(a SIGHUP to the master daemon process.)S
/F5 SF 0 376.2 M(21.)S
/F4 SF ( 503 No PORT command issued)S
0 349.8 M(A bug was introduced in 1.2.0rc2 which prevented the PORT command working properly and therefore)S
0 336.6 M(breaking the data socket under certain conditions. The bug was documented as bug 240 and has been fixed in)S
0 323.4 M(CVS. A rc3 release is due before the end of Jan 2001.)S
/F5 SF 0 297 M(22.)S
/F4 SF ( Fatal: unable to determine IP address of)S
0 270.6 M(Proftpd was unable to work out what IP is associated with the hostname in the VirtualHost block. Normally)S
0 257.4 M(caused by a problem with the DNS resolution of the host, check the resolv.conf file and that your chosen)S
0 244.2 M(nameservers are functional.)S
/F5 SF 0 217.8 M(23.)S
/F4 SF ( 451 append/restart not permitted, try again)S
0 191.4 M(AllowStoreRestart is disabled by default because it will allow any writable file to be corrupted by a malicious)S
0 178.2 M(user. It is recommended that this option is only used with authenticated users and then only in certain)S
0 165 M(directories.)S
/F5 SF 0 138.6 M(24.)S
/F4 SF ( 501 REST not compatible with server configuration)S
0 112.2 M(As mentioned in the description of the HiddenStores configuration directive, use of that directive is)S
0 99 M(incompatible with the FTP command REST. Either disable use of REST with the AllowRetrieveRestart and)S
0 85.8 M(AllowStoreRestart directives, or do not use HiddenStores.)S
/F5 SF 0 59.4 M(25.)S
/F4 SF ( The time being displayed is wrong)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(inetd)S
474.768 0 M(13)S
GR
SP
%%Page: 14 14
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 95.4 M 487.0 2.0 F
11 FS/F4 SF 0 687 M(The default behaviour for ProFTPD is to display all times relative to GMT. To use local time set "TimesGMT)S
0 673.8 M(off" in the server section of the config. There is a known issue with Redhat 7, with regard to time handling.)S
0 660.6 M(http://www.redhat.com/support/errata/rh7-errata-bugfixes.html)S
/F5 SF 0 634.2 M(26.)S
/F4 SF ( Corrupted files)S
0 607.8 M(There appear to be some problems with both the use of sendfile\(\) in ProFTPD and with the implementation)S
0 594.6 M(within certain operating systems.)S
/F5 SF 0 568.2 M(27.)S
/F4 SF ( Can I upgrade ProFTPD without terminating the current sessions?)S
0 541.8 M(Short answer, no. Longer answer is no, but you can minimise the effects. The cleanest approach on servers)S
0 528.6 M(which have significant amounts of traffic appears to be to use ftpshut to block new connections and terminate)S
0 515.4 M(existing ones after a pre-determined time period and then to upgrade and restart. This approach limits the)S
0 502.2 M(number of downloads which are terminated part way through.)S
/F5 SF 0 475.8 M(28.)S
/F4 SF ( No such group "nogroup")S
0 449.4 M(The default ProFTPD configuration file uses the user "nouser" and the group "nogroup", some systems /)S
0 436.2 M(distributions do not have the group "nogroup" defined. The solution is to either add the group "nogroup" to)S
0 423 M(/etc/groups or to change the "nogroup" entry in the proftpd.conf to a group which does exist.)S
/F5 SF 0 396.6 M(29.)S
/F4 SF ( Why do I see "unable to set groups: Invalid argument"?)S
0 370.2 M(The setting of the group privileges for a process uses the setgroups\(2\) system call. This call will fail with the)S
0 357 M(above error message for one of two reasons: there is a negative GID value for one of the groups, or the)S
0 343.8 M(maximum number of groups for a single user has been exceeded.)S
0 317.4 M(Ideally, all IDs, both UID and GID, will be positive. Unfortunately, it is common on many systems to use -1)S
0 304.2 M(or -2, especially for such users as 'nobody', or group 'nogroup'. Use of these values uses C's treatment of data)S
0 291 M(types to make the actual numeric value very high; some functions, like setgroups\(\), do not like this, though. In)S
0 277.8 M(general, always use positive ID numbers.)S
0 251.4 M(The other limitation is the number of supplemental groups for a user \(eg non-primary groups, the ones)S
0 238.2 M(configured in /etc/group\). The maximum number of supplemental groups to which a user may belong is)S
0 225 M(defined by the operating system constant NGROUPS_MAX. On some operating systems, such as Solaris, this)S
0 211.8 M(limitation may be tunable.)S
0 185.4 M(Some other applications may not encounter this error if they use the initgroups\(3\) function, which reads the)S
0 172.2 M(/etc/group file for a user's supplemental group memberships, and sets those groups. This function, however,)S
0 159 M(silently ignores any supplemental groups for user greater than NGROUPS_MAX, unlike setgroups\(2\), which)S
0 145.8 M(complains.)S
0 119.4 M(If this is the cause of your error message, any solution will most likely involve reducing the number of groups)S
0 106.2 M(your users are members of, or tuning the NGROUPS_MAX value, if your operating system allows it.)S
20 FS/F9 SF 0 68.8 M(Chapter 5. Configuration problems)S
11 FS/F6 SF 0 40.6 M(1. How do I add another anonymous login or guest account?)S
0 27.4 M(2. How do I ftp as root?)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 5. Configuration problems)S
474.768 0 M(14)S
GR
SP
%%Page: 15 15
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(3. How do I provide a secure upload facility?)S
0 673.8 M(4. How can I stop my users from using their space as a warez repository)S
0 660.6 M(5. Can I rotate files out of an upload directory after upload?)S
0 647.4 M(6. How can I hide a directory from anonymous clients.)S
0 634.2 M(7. File/Directory hiding isn't working for me!)S
0 621 M(8. I want to prevent users from accessing a hidden directory)S
0 607.8 M(9. How do I setup a virtual FTP server?)S
0 594.6 M(10. I only want to allow anonymous access to a virtual server.)S
0 581.4 M(11. How does <Limit LOGIN> work, and where should I use it?)S
0 568.2 M(12. How can I limit users to a particular directory tree?)S
0 555 M(13. How do I create individual anonymous FTP sites for my users?)S
0 541.8 M(14. I want to support normal login and Anonymous under a particular user)S
0 528.6 M(15. Why doesn't Anonymous ftp work \(550 login incorrect\)?)S
0 515.4 M(16. Bandwidth control)S
0 502.2 M(17. CHMOD isn't working)S
0 489 M(18. How can I limit the size of uploaded files?)S
0 475.8 M(19. Can I disable Anonymous logins?)S
0 462.6 M(20. Limiting the connections per loginID)S
0 449.4 M(21. How do I configure proftpd to allow transfer resumption \(for downloads and uploads\)?)S
/F4 SF 0 423 M(Problems encountered in trying to make the server behave exactly as required after compilation and)S
0 409.8 M(installation are complete and the server is running.)S
/F5 SF 0 383.4 M(1.)S
/F4 SF ( How do I add another anonymous login or guest account?)S
0 357 M(You should look in the sample-configurations/ directory from your distribution tarball. Basically, you'll need)S
0 343.8 M(to create another user on your system for the guest/anonymous ftp login. For security reasons, it's very)S
0 330.6 M(important that you make sure the user account either has a password or has an "unmatchable" password. The)S
0 317.4 M(root directory of the guest/anonymous account doesn't have to be the user's directory, but it makes sense to do)S
0 304.2 M(so. After you have created the account, put something like the following in your /etc/proftpd.conf file)S
0 291 M(\(assuming the new user/group name is private/private\):)S
9 FS/F0 SF 0 266.6 M(<Anonymous ~private>)S
0 255.8 M(AnonRequirePassword off)S
0 245 M(User private)S
0 234.2 M(Group private)S
0 223.4 M(RequireValidShell off)S
0 212.6 M(<Directory *>)S
0 201.8 M(<Limit WRITE>)S
0 191 M(DenyAll)S
0 180.2 M(</Limit>)S
0 169.4 M(</Directory>)S
0 158.6 M(</Anonymous>)S
11 FS/F4 SF 0 121.8 M(This will allow ftp clients to login to your site with the username "private" and their e-mail address as a)S
0 108.6 M(password. You can change the AnonRequirePassword directive to "on" if you want clients to be forced to)S
0 95.4 M(transmit the correct password for the "private" account. This sample configuration allows clients to change)S
0 82.2 M(into, list and read all directories, but denies write access of any kind.)S
/F5 SF 0 55.8 M(2.)S
/F4 SF ( How do I ftp as root?)S
0 29.4 M(First off this is a)S
/F6 SF ( bad)S
/F4 SF ( idea ftping as root is insecure, there are better more secure ways of shifting files as root.)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 5. Configuration problems)S
474.768 0 M(15)S
GR
SP
%%Page: 16 16
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(To enable root ftp ensure that the directive "RootLogin on" is included in your configuration.)S
/F5 SF 0 660.6 M(3.)S
/F4 SF ( How do I provide a secure upload facility?)S
0 634.2 M(The following snippet from a sample configuration file illustrates how to protect an "upload" directory in such)S
0 621 M(a fashion \(which is a very good idea if you don't want people using your site for "warez"\):)S
9 FS/F0 SF 0 596.6 M(<Anonymous /home/ftp>)S
0 585.8 M(  # All files uploaded are set to username.usergroup ownership)S
0 575 M(  User username)S
0 564.2 M(  Group usergroup)S
0 553.4 M(  UserAlias ftp username)S
0 542.6 M(  AuthAliasOnly on)S
0 531.8 M(  RequireValidShell off)S
0 510.2 M(  <Directory pub/incoming/>)S
0 499.4 M(     <Limit STOR CWD>)S
0 488.6 M(        AllowAll)S
0 477.8 M(     </Limit>)S
0 467 M(     <Limit READ RMD DELE MKD>)S
0 456.2 M(        DenyAll)S
0 445.4 M(     </Limit>)S
0 434.6 M(  </Directory>)S
0 423.8 M(</Anonymous>)S
11 FS/F4 SF 0 387 M(This denies all write operations to the anonymous root directory and sub-directories, except "incoming/")S
0 373.8 M(where the permissions are reversed and the client can store but not read. If you used <Limit WRITE> instead)S
0 360.6 M(of <Limit STOR> on <Directory incoming>, ftp clients would be allowed to perform all write operations to)S
0 347.4 M(the sub-dir, including deleting, renaming and creating directories.)S
/F5 SF 0 321 M(4.)S
/F4 SF ( How can I stop my users from using their space as a warez repository)S
0 294.6 M(The above fragment will control anonymous users however if a local user with a full account with up and)S
0 281.4 M(download capability is abusing their space then the technical measures which can be taken are limited.)S
0 268.2 M(Applying a sane system quota is a good start, using the mod_quota and mod_ratio modules may control the)S
0 255 M(rates of upload/download making it less useful as a warez repository. In the end it comes down to system)S
0 241.8 M(monitoring and good site AUP's and enforcement.)S
/F5 SF 0 215.4 M(5.)S
/F4 SF ( Can I rotate files out of an upload directory after upload?)S
0 189 M(Yes. You'll need to write a script which either checks the contents of the directory regularly and moves once)S
0 175.8 M(it's detected no size change in a file for xyz seconds. Or a script which monitors an upload log. There is no)S
0 162.6 M(automatic method for doing this.)S
/F5 SF 0 136.2 M(6.)S
/F4 SF ( How can I hide a directory from anonymous clients.)S
0 109.8 M(Use the HideUser or HideGroup directive in combination with the proper user/group ownership on the)S
0 96.6 M(directive. For example, if you have the follow directory in your anonymous ftp directory tree:)S
9 FS/F0 SF 0 72.2 M(drwxrwxr-x 3 ftp staff 6144 Apr 21 16:40 private)S
11 FS/F4 SF 0 35.4 M(You can use a directive such as "HideGroup staff" to hide the private directory from a directory listing. For)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 5. Configuration problems)S
474.768 0 M(16)S
GR
SP
%%Page: 17 17
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(example:)S
9 FS/F0 SF 0 662.6 M(<Anonymous ~ftp>)S
0 651.8 M(...)S
0 641 M(<Directory Private>)S
0 630.2 M(HideGroup staff)S
0 619.4 M(</Directory>)S
0 608.6 M(...)S
0 597.8 M(</Anonymous>)S
11 FS/F5 SF 0 561 M(7.)S
/F4 SF ( File/Directory hiding isn't working for me!)S
0 534.6 M(You need to make sure that the group you are hiding isn't the anonymous ftp user's primary group, or)S
0 521.4 M(HideGroup won't apply.)S
/F5 SF 0 495 M(8.)S
/F4 SF ( I want to prevent users from accessing a hidden directory)S
0 468.6 M(You can either change the permissions on the directory to prevent the anonymous FTP user from accessing it,)S
0 455.4 M(or if you want to make it appear completely invisible \(as though there is no such directory\), use the)S
0 442.2 M(IgnoreHidden directive inside a <Limit> block for one or more commands that you want to completely ignore)S
0 429 M(the hidden directory entries \(ignore = act as if the directory entry does not exist\).)S
/F5 SF 0 402.6 M(9.)S
/F4 SF ( How do I setup a virtual FTP server?)S
0 376.2 M(You'll need to configure your host to be able to handle multiple IP addresses. This is often called "aliasing",)S
0 363 M(and can generally be configured through an IP alias or dummy interface. You need to read your operating)S
0 349.8 M(system documentation to figure out how to do this. Once your have the host configured to accept the)S
0 336.6 M(additional IP address that you wish to offer a virtual FTP server on, use the <VirtualHost> configuration)S
0 323.4 M(directive to create the virtual server:)S
9 FS/F0 SF 0 299 M(<VirtualHost 10.0.0.1>)S
0 288.2 M(ServerName "My virtual FTP server")S
0 277.4 M(</VirtualHost>)S
11 FS/F4 SF 0 240.6 M(You can add additional directive blocks into the <VirtualHost> block in order to create anonymous/guest)S
0 227.4 M(logins and the like which are only available on the virtual host.)S
/F5 SF 0 201 M(10.)S
/F4 SF ( I only want to allow anonymous access to a virtual server.)S
0 174.6 M(Use a <Limit LOGIN> block to deny access at the top-level of the virtual host, then use <Limit LOGIN>)S
0 161.4 M(again in your <Anonymous> block to allow access to the anonymous login. This permits logins to a virtual)S
0 148.2 M(anonymous server, but denies to everything else. Example:)S
9 FS/F0 SF 0 123.8 M(<VirtualHost 10.0.0.1>)S
0 113 M(ServerName "My virtual FTP server")S
0 102.2 M(<Limit LOGIN>)S
0 91.4 M(DenyAll)S
0 80.6 M(</Limit>)S
0 69.8 M(<Anonymous /usr/local/private>)S
0 59 M(User private)S
0 48.2 M(Group private)S
0 37.4 M(<Limit LOGIN>)S
0 26.6 M(AllowAll)S
11 FS/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 5. Configuration problems)S
474.768 0 M(17)S
GR
SP
%%Page: 18 18
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 0 689 M(</Limit>)S
0 678.2 M(...)S
0 667.4 M(</Anonymous>)S
0 656.6 M(</VirtualHost>)S
11 FS/F5 SF 0 619.8 M(11.)S
/F4 SF ( How does <Limit LOGIN> work, and where should I use it?)S
0 593.4 M(The <LOGIN> directive is used to control connection or login access to a particular context \(the directive)S
0 580.2 M(block which contains it\). When a client initially connects to ProFTPD, the daemon searches the configuration)S
0 567 M(tree for <Limit LOGIN> directives, and attached parameters \(such as Allow, Deny, etc\). If it determines that)S
0 553.8 M(there is no possible way for the client to ever be allowed to login, such as a "Deny from" matching the client's)S
0 540.6 M(source address, without an overriding "Allow from" at a lower level, the client is disconnected without being)S
0 527.4 M(offered the opportunity to transmit a user and password.)S
0 501 M(However, if it is possible for the client to be allowed a login, ProFTPD continues as per normal, allowing the)S
0 487.8 M(client to login only if the proper <Limit LOGIN> applies. Normally, <Limit> directive blocks are allowed in)S
0 474.6 M(the server config, <VirtualHost>, <Anonymous> and <Directory> contexts. However, <Limit LOGIN>)S
0 461.4 M(should not be used in a <Directory> context, as clients do not connect/login to a directory \(and thus it is)S
0 448.2 M(meaningless\).)S
0 421.8 M(By way of example, the following configuration snippet illustrates a <Limit LOGIN> deny which will cause)S
0 408.6 M(any incoming connections from the 10.1.1.x subnet to be immediately disconnected, without a welcome)S
0 395.4 M(message:)S
9 FS/F0 SF 0 371 M(...)S
0 360.2 M(<Limit LOGIN>)S
0 349.4 M(Order deny,allow)S
0 338.6 M(Deny from 10.1.1.)S
0 327.8 M(Allow from all)S
0 317 M(</Limit>)S
0 306.2 M(...)S
11 FS/F4 SF 0 269.4 M(Next, an example of a configuration using <Limit LOGIN> that will not immediately disconnect an incoming)S
0 256.2 M(client, but will return "Login invalid" for all login attempts except anonymous.)S
9 FS/F0 SF 0 231.8 M(...)S
0 221 M(<Limit LOGIN>)S
0 210.2 M(DenyAll)S
0 199.4 M(</Limit>)S
0 188.6 M(<Anonymous ~ftp>)S
0 177.8 M(...)S
0 167 M(<Limit LOGIN>)S
0 156.2 M(AllowAll)S
0 145.4 M(</Limit>)S
0 134.6 M(...)S
11 FS/F5 SF 0 97.8 M(12.)S
/F4 SF ( How can I limit users to a particular directory tree?)S
0 71.4 M(For general open access you can use an <Anonymous> directive context block, possibly in combination with a)S
0 58.2 M(UserPassword/AnonRequirePassword directive.)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 5. Configuration problems)S
474.768 0 M(18)S
GR
SP
%%Page: 19 19
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(However if you wish to jail an entire group \(or groups\) of users, you can use the DefaultRoot directive.)S
0 673.8 M(DefaultRoot lets you specify a root jailed directory \(or "~" for the user's home directory\), and an optional)S
0 660.6 M(group-expression argument which can be used to control which groups of users the jail will be applied to. For)S
0 647.4 M(example:)S
9 FS/F0 SF 0 623 M(...)S
0 612.2 M(<VirtualHost myhost.mynet.foo>)S
0 601.4 M(DefaultRoot ~)S
0 590.6 M(...)S
0 579.8 M(</VirtualHost>)S
11 FS/F4 SF 0 543 M(This creates a configuration where all users who log into myhost.mynet.foo are jailed into their home)S
0 529.8 M(directories \(cannot chdir into a higher level directory\). Alternatively, you could:)S
9 FS/F0 SF 0 505.4 M(...)S
0 494.6 M(<VirtualHost myhost.mynet.foo>)S
0 483.8 M(DefaultRoot /u2/public users,!staff)S
0 473 M(...)S
0 462.2 M(</VirtualHost>)S
11 FS/F4 SF 0 425.4 M(In this example, all users who are members of group "users", but not members of group "staff" are jailed into)S
0 412.2 M(/u2/public. If a user does not meet the group-expression requirements, they login as per normal \(not jailed,)S
0 399 M(default directory is their home\). You can use multiple DefaultRoot directives to create multiple jails inside the)S
0 385.8 M(same directive context. If two DefaultRoot directives apply to the same user, ProFTPD arbitrarily chooses one)S
0 372.6 M(\(based on how the configuration file was parsed\).)S
14 FS/F9 SF 36 330 M(Security Implications)S
11 FS/F4 SF 36 303 M(The DefaultRoot directive is implemented using the chroot\(2\) system call. This moves the "/")S
36 289.8 M(\(or root\) directory to a specified point within the file system and jails the user into this)S
36 276.6 M(sub-tree. However this is not the holy grail of security, a chroot jail can be broken, it is not a)S
36 263.4 M(trivial matter but it's nowhere near impossible. DefaultRoot should be used as part of a)S
36 250.2 M(general system of security not the only security measure.)S
36 223.8 M(A more detailed http://www.bpfh.net/simes/computing/chroot-break.html on this subject and)S
36 210.6 M(on the breaking of chroot jails has been written by Simon Burr)S
14 FS/F9 SF 36 181.2 M(Non-root server issues)S
11 FS/F4 SF 36 154.2 M(The chroot\(\) system call will not work under a non-root ftp server process, the call requires)S
36 141 M(root privaliges. Without them it simply doesn't work, there doesn't appear to be any checking)S
36 127.8 M(in the code of the uid/gid before calling chroot so using DefaultRoot in such a setup will)S
36 114.6 M(cause the server to fail.)S
14 FS/F9 SF 36 85.2 M(Symlinks)S
11 FS/F4 SF 36 58.2 M(Symlinks will not work from within a chrooted area. The reason should be clear from a casual)S
36 45 M(inspection of the nature of the chroot command. It is not possible to have a symbolic link to a)S
36 31.8 M(directory which can"t be reached beacuse it's outside of the current chroot. Work arounds to)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Security Implications)S
474.768 0 M(19)S
GR
SP
%%Page: 20 20
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 36 687 M(allow access to other parts of the file system include exporting the part of the filesystem to be)S
36 673.8 M(accessed from inside the chroot and mounting via NFS, using hard file links or \(on Solaris\))S
36 660.6 M(using lofs to mount the directory via the loopback.)S
9 FS/F0 SF 36 636.2 M(mount -Flofs /home/data1 /ftp/data1)S
36 625.4 M(mount -Flofs /home/data2 /ftp/data2)S
11 FS/F4 SF 36 588.6 M(As of the 2.4.x Linux kernel tree it is possible to mount filesystems multiple times and to)S
36 575.4 M(mount subdirectories of filesystems elsewhere on the filesystem.)S
/F5 SF 0 549 M(13.)S
/F4 SF ( How do I create individual anonymous FTP sites for my users?)S
0 522.6 M(There are two methods of accomplishing this \(possibly more\). First, you can create a directory structure inside)S
0 509.4 M(your anonymous FTP root directory, creating a single directory for each user and setting)S
0 496.2 M(ownership/permissions as appropriate. Then, either create a symlink from each user's home directory into the)S
0 483 M(FTP site, or instruct your users on how to access their directory.)S
0 456.6 M(The alternate method \(and more versatile\) of accomplishing per-user anonymous FTP is to use)S
0 443.4 M(AnonymousGroup in combination with the DefaultRoot directory. You'll probably want to do this inside a)S
0 430.2 M(<VirtualHost>, otherwise none of your users will be able to access your system without being stuck inside)S
0 417 M(their per-user FTP site. Additionally, you'll want to use a deferred <Directory> block to carefully limit)S
0 403.8 M(outside access to each user's site.)S
36 377.4 M(Create a new unix group on your system named `anonftp". Please each user who will have per-user)S
36 364.2 M(anonymous FTP in this group.)S
25 377.4 M(1. )S
36 351 M(Create an `anon-ftp" and `anon-ftp/incoming" directory in each user's home directory.)S
25 351 M(2. )S
36 337.8 M(Modify your /etc/proftpd.conf file to look something like this \(you'll probably want to customize this)S
36 324.6 M(to your needs\):)S
9 FS/F0 SF 36 300.2 M( <VirtualHost my.per-user.virtual.host.address>)S
36 278.6 M( # the next line limits all logins to this virtual host, so that only)S
36 267.8 M( anonftp users can connect)S
36 246.2 M( <Limit LOGIN>)S
36 235.4 M( DenyGroup !anonftp)S
36 224.6 M( </Limit>)S
36 203 M( # limit access to each user's anon-ftp directory, we want read-only)S
36 192.2 M( except on incoming)S
36 170.6 M( <Directory ~/anon-ftp>)S
36 149 M( <Limit WRITE>)S
36 138.2 M( DenyAll)S
36 127.4 M( </Limit>)S
36 105.8 M( </Directory>)S
36 84.2 M( # permit stor access to each user's anon-ftp/incoming directory,)S
36 73.4 M( but deny everything else)S
36 51.8 M( <Directory ~/anon-ftp/incoming>)S
36 30.2 M( <Limit STOR>)S
11 FS/F4 SF 25 337.8 M(3. )S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Security Implications)S
474.768 0 M(20)S
GR
SP
%%Page: 21 21
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 36 689 M( AllowAll)S
36 678.2 M( </Limit>)S
36 667.4 M( <Limit READ WRITE>)S
36 656.6 M( DenyAll)S
36 645.8 M( </Limit>)S
36 624.2 M( </Directory>)S
36 602.6 M( # provide a default root for all logins to this virtual host.)S
36 591.8 M( DefaultRoot ~/anon-ftp)S
36 581 M( # Finally, force all logins to be anonymous for the anonftp group)S
36 570.2 M( AnonymousGroup anonftp)S
36 548.6 M( </VirtualHost>)S
11 FS/F5 SF 0 511.8 M(14.)S
/F4 SF ( I want to support normal login and Anonymous under a particular user)S
0 485.4 M(You can use the AuthAliasOnly directive to control how and where real usernames get authenticated \(as)S
0 472.2 M(opposed to aliased names, via the UserAlias directive\). Note that it is still impossible to have two identical)S
0 459 M(aliased names login to different anonymous sites; for that you would need <VirtualHost>.)S
0 432.6 M(Example:)S
9 FS/F0 SF 0 408.2 M(...)S
0 397.4 M(<Anonymous ~jrluser>)S
0 375.8 M( User jrluser)S
0 365 M( Group jrluser)S
0 354.2 M( UserAlias ftp jrluser)S
0 343.4 M( UserAlias anonymous jrluser)S
0 332.6 M( AuthAliasOnly on)S
0 321.8 M( ...)S
0 300.2 M(</Anonymous>)S
11 FS/F4 SF 0 263.4 M(Here, the <Anonymous> configuration for ~jrluser is set to allow alias authentication only. Thus, if a client)S
0 250.2 M(attempts to authenticate as "jrluser", the anonymous config will be ignored and the client will be authenticated)S
0 237 M(as if they were a normal user \(typically resulting in `jrluser" logging in normally\). However, if the client uses)S
0 223.8 M(the aliased username `ftp" or `anonymous", the anonymous block is applied.)S
/F5 SF 0 197.4 M(15.)S
/F4 SF ( Why doesn't Anonymous ftp work \(550 login incorrect\)?)S
0 171 M(Things to check)S
/F5 SF 0 144.6 M(Check the following first:)S
/F4 SF 36 118.2 M(Make sure the user/group you specified inside the <Anonymous> block actually exists. This must be a)S
36 105 M(real user and group, as it is used to control whom the daemon runs as and authenticates as.)S
/Fc SF 28.19 118.2 M(\267 )S
/F4 SF 36 91.8 M(If RequireValidShell is not specifically turned off, make sure that your "ftp user" \(as specified by the)S
36 78.6 M(User directive inside an <Anonymous> block\), has a valid shell listed in /etc/shells. If you do not wish)S
36 65.4 M(to give the user a valid shell, you can always use "RequireValidShell off" to disable this check.)S
/Fc SF 28.19 91.8 M(\267 )S
/F4 SF 36 52.2 M(If UseFtpUsers is not specifically turned off, make sure that your "ftp user" is not listed in)S
36 39 M(/etc/ftpusers.)S
/Fc SF 28.19 52.2 M(\267 )S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Security Implications)S
474.768 0 M(21)S
GR
SP
%%Page: 22 22
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 161.4 M 487.0 2.0 F
11 FS/F4 SF 0 687 M(If all else fails, you should check your syslog. When authentication fails for any reason, ProFTPD uses the)S
0 673.8 M(syslog mechanism to log the reason for failure; using the AUTH \(or AUTHPRIV\) facility. If you need further)S
0 660.6 M(assistance, you can send email, including related syslog entries and your configuration file, to the ProFTPD)S
0 647.4 M(mailing list mentioned elsewhere in this FAQ.)S
/F5 SF 0 621 M(16.)S
/F4 SF ( Bandwidth control)S
0 594.6 M(A new patch providing the TransferRate directive has been provided and is slated for inclusion in 1.2.8, this)S
0 581.4 M(gives per-connection bandwidth limits with Class support. The limits are more effective against downloads)S
0 568.2 M(than uploads.)S
0 541.8 M(There is no method to control the total bandwidth a single VirtualHost context can use.)S
/F5 SF 0 515.4 M(17.)S
/F4 SF ( CHMOD isn't working)S
0 489 M(AllowChmod is deprecated and has been replaced with the SITE_CHMOD expansion for controlling this)S
0 475.8 M(functionality.)S
/F5 SF 0 449.4 M(18.)S
/F4 SF ( How can I limit the size of uploaded files?)S
0 423 M(As of 1.2.7rc1 there are two new directives MaxRetrieveFileSize and MaxStoreFileSize to control the)S
0 409.8 M(maximum size of files being transfered to or from the server.)S
/F5 SF 0 383.4 M(19.)S
/F4 SF ( Can I disable Anonymous logins?)S
0 357 M(Yes, just remove all the <Anonymous> sections from your configuration file and reload the daemon.)S
/F5 SF 0 330.6 M(20.)S
/F4 SF ( Limiting the connections per loginID)S
0 304.2 M(As of 1.2.7rc1 MaxClientsPerUser has been implemented.)S
/F5 SF 0 277.8 M(21.)S
/F4 SF ( How do I configure proftpd to allow transfer resumption \(for downloads and uploads\)?)S
0 251.4 M(To allow downloads to be resumed, you need to use the AllowRetrieveRestart configuration directive.)S
0 225 M(To allow uploads to be resumed, you need to use both the AllowOverwrite and AllowStoreRestart directives.)S
0 211.8 M(The reason that both need to be allowed is that a restarted/resumed upload is a form of overwriting the file.)S
0 185.4 M(Also note that using HiddenStores and AllowStoreRestart is incompatible, as mentioned in the documentation)S
0 172.2 M(for the AllowStoreRestart and HiddenStores directives.)S
20 FS/F9 SF 0 134.8 M(Chapter 6. Security)S
11 FS/F6 SF 0 106.6 M(1. General)S
0 93.4 M(2. Surely running ProFTPD as non-root will help?)S
0 80.2 M(3. How can I control what commands the server accepts?)S
0 67 M(4. How can I prevent the server version from being displayed?)S
0 53.8 M(5. I want to show a message prior to login)S
0 40.6 M(6. I want to display a message after login)S
0 27.4 M(7. Can I have a custom welcome response?)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 6. Security)S
474.768 0 M(22)S
GR
SP
%%Page: 23 23
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F6 SF 0 687 M(8. External Programs)S
0 673.8 M(9. Why do I see "No certificates found!"?)S
0 660.6 M(10. I can delete files owned by root. Why is this?)S
/F5 SF 0 634.2 M(1.)S
/F4 SF ( General)S
0 607.8 M(As with all software there have been a number of security issues during the life of the project. The most recent)S
0 594.6 M(information can always be found on http://www.proftpd.org/security.html)S
0 568.2 M(Versions 1.2.0 and above should be considered to be production code and few if any new features will be)S
0 555 M(added to this code branch to maintain stability.)S
14 FS/F9 SF 36 512.4 M(What about using Stackguard?)S
11 FS/F4 SF 36 485.4 M(Stackguard \(http://immunix.org\) is a gcc variant which can protect programs from)S
36 472.2 M(stack-smashing attacks, programs compiled using Stackguard dies without executing the)S
36 459 M(stack code. While this approach is a good first line of defense against future problems it"s not)S
36 445.8 M(a complete cure-all. Some of the buffer overflows were found on static variables, which are)S
36 432.6 M(not protected by stack protection mechanisms.)S
/F5 SF 0 406.2 M(2.)S
/F4 SF ( Surely running ProFTPD as non-root will help?)S
0 379.8 M(Running ProFTPD as a non-root user gives only a marginal security improvement on the normal case and)S
0 366.6 M(adds some functional problems. Such as not being able to bind to ports 20 or 21, unless it's spawned from)S
0 353.4 M(inetd.)S
0 327 M(ProFTPD takes a middle road in terms of security. It only uses root privileges where required and drops to the)S
0 313.8 M(UID defined in the config file at all other times. Times when root is required include, binding to ports < 1024,)S
0 300.6 M(setting resource limits, reading configuration information and some network code.)S
0 274.2 M(For Linux 2.2.x kernel systems there is the POSIX style mod_linuxprivs module which allows very fine grain)S
0 261 M(control over privileges. This is highly recommended for security-conscious admins.)S
/F5 SF 0 234.6 M(3.)S
/F4 SF ( How can I control what commands the server accepts?)S
0 208.2 M(Use a sane Allow/DenyFilter, these directives use regular expressions to control all text sent over the control)S
0 195 M(socket. \(If anyone has some good examples please let me know.\)\15)S
/F5 SF 0 168.6 M(4.)S
/F4 SF ( How can I prevent the server version from being displayed?)S
0 142.2 M(Setting SeverIdent to "off" should turn off the information about what type of server is running. To have)S
0 129 M(maximum effect this directive should either be in the Global context or included in every virtual host block)S
0 115.8 M(and the default block.)S
9 FS/F0 SF 0 91.4 M(ServerIdent  On "Linux.co.uk server")S
0 69.8 M(ServerIdent  Off)S
11 FS/F5 SF 0 33 M(5.)S
/F4 SF ( I want to show a message prior to login)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(What about using Stackguard?)S
474.768 0 M(23)S
GR
SP
%%Page: 24 24
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(Use the DisplayConnect directive to specify a file containing a message to be displayed prior to login.)S
9 FS/F0 SF 0 662.6 M(DisplayConnect /ftp/ftp.virtualhost/login.msg)S
11 FS/F5 SF 0 625.8 M(6.)S
/F4 SF ( I want to display a message after login)S
0 599.4 M(Use the DisplayLogin directive, this sends a specified ASCII file to the connected user.)S
9 FS/F0 SF 0 575 M(DisplayLogin       /etc/proftp.msg)S
11 FS/F5 SF 0 538.2 M(7.)S
/F4 SF ( Can I have a custom welcome response?)S
0 511.8 M(Use the AccessGrantMsg directive, this sends a simple single line message back to the user after a successful)S
0 498.6 M(authentication. Magic cookies appear to be honoured in this directive.)S
9 FS/F0 SF 0 474.2 M(AccessGrantMsg "Guest access granted for %u.")S
11 FS/F4 SF 0 437.4 M(Note, this directive has an overriding default and needs to be specified in both VirtualHost and Anonymous)S
0 424.2 M(blocks.)S
/F5 SF 0 397.8 M(8.)S
/F4 SF ( External Programs)S
0 371.4 M(ProFTPD has been designed to run as a secure ftp server, this means that it tries to keep as much as possible)S
0 358.2 M(under it's control. An external program is a security risk in itself because it's behaviour is not controllable)S
0 345 M(from within the ftpd code.)S
/F5 SF 0 318.6 M(9.)S
/F4 SF ( Why do I see "No certificates found!"?)S
0 292.2 M(This message is generated by mod_tls, the third-party module that can be used to encrypt both the control and)S
0 279 M(data connections with TLS \(Transport Layer Security\), the next generation of SSL. Certificates are used to)S
0 265.8 M(establish the security context for this secure transport.)S
0 239.4 M(Generation of certifications is beyond the scope of this document; however, more information can be found)S
0 226.2 M(here:)S
0 199.8 M(http://en.tldp.org/HOWTO/SSL-Certificates-HOWTO/)S
/F5 SF 0 173.4 M(10.)S
/F4 SF ( I can delete files owned by root. Why is this?)S
0 147 M(ProPTPD follows the UNIX file permission rules when determining the level of access and/or control a user is)S
0 133.8 M(granted when working with a file. UNIX systems divide the world into three classes when determining the)S
0 120.6 M(permissions that a user is granted for a particular file:)S
36 94.2 M(User - the owner of the file)S
/Fc SF 28.19 94.2 M(\267 )S
/F4 SF 36 81 M(Group - a collection of users defined in /etc/group)S
/Fc SF 28.19 81 M(\267 )S
/F4 SF 36 67.8 M(Others - neither the owner, nor a member of the group)S
/Fc SF 28.19 67.8 M(\267 )S
/F4 SF 0 41.4 M(Every file in a Unix filesystem has a permission definition associated with it. At a minimum, the permission)S
0 28.2 M(established for a file will determine whether a particular user may READ, WRITE, or EXECUTE the file in)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(What about using Stackguard?)S
474.768 0 M(24)S
GR
SP
%%Page: 25 25
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
0 318.6 M 487.0 2.0 F
11 FS/F4 SF 0 687 M(question. A directory listing will show the permissions associated with a file in the format shown below:)S
9 FS/F0 SF 0 662.6 M(  rwx  r-x  r-x)S
0 651.8 M(   |    |    |)S
0 641 M(   |    |    |_____________ Others:  READ/NO WRITE/EXECUTE)S
0 630.2 M(   |    |__________________ Group:   READ/NO WRITE/EXECUTE)S
0 619.4 M(   |_______________________ User:    READ/WRITE/EXECUTE)S
11 FS/F4 SF 0 593.4 M(In the sample directory listing shown below, READ/WRITE/EXECUTE privileges are granted to the owner)S
0 580.2 M(of the directory, and READ/EXECUTE privileges are granted to members of the )S
/F0 SF (users)S
/F4 SF ( group and everyone)S
0 567 M(else. Note the letter "d" at the beginning of each entry, denoting that the entry is actually a directory.)S
9 FS/F0 SF 0 542.6 M(  prince> ls -l /home/ftp)S
0 521 M(  total 8)S
0 510.2 M(  drwxr-xr-x    2 andrea   users        4096 May  3 00:40 andrea)S
0 499.4 M(  drwxr-xr-x    2 eve      users        4096 May  3 00:40 eve)S
0 477.8 M(  prince> ls -l /home/ftp/andrea )S
0 456.2 M(  total 156)S
0 445.4 M(  -rw-r--r--    1 andrea   users       85991 May  3 01:12 bland.txt)S
0 434.6 M(  -rwxr-xr-x    1 root     root        65107 May  3 01:12 secret.txt)S
11 FS/F4 SF 0 408.6 M(The answer to this question is shown in the above example. When describing the permissions associated with)S
0 395.4 M(a directory, WRITE means that permission is granted to modify the contents of a directory by adding or)S
0 382.2 M(deleting files. Thus, the user )S
/F0 SF (andrea)S
/F4 SF ( may delete the file )S
/F0 SF (secret.txt)S
/F4 SF (, even though she cannot modify the)S
0 369 M(file itself.)S
0 342.6 M(Refer to the documentation for the)S
/F6 SF ( IgnoreHidden)S
/F4 SF ( and)S
/F6 SF ( HideNoAccess)S
/F4 SF ( directives for a method to mitigate this)S
0 329.4 M(hazard.)S
20 FS/F9 SF 0 292 M(Chapter 7. User Authentication)S
11 FS/F6 SF 0 263.8 M(1. Why is PAM the default authentication system?)S
0 250.6 M(2. Authentication methods supported)S
0 237.4 M(3. Problems with non-PAM authentication)S
0 224.2 M(4. AuthPAMAuthorative is an unknown directive!)S
0 211 M(5. Configuring PAM)S
0 197.8 M(6. Normal users can't login, only anon.)S
0 184.6 M(7. AuthPAMAuthoritative)S
0 171.4 M(8. LDAP)S
0 158.2 M(9. One time passwords)S
0 145 M(10. RADIUS)S
0 131.8 M(11. Anonymous password checking)S
0 118.6 M(12. Why do I see "PAM\(name\): Authentication failure", but I can login anyway?)S
/F4 SF 0 92.2 M(This section is being re-written due to major structural changes to the SQL module prior to 1.2.0)S
/F5 SF 0 65.8 M(1.)S
/F4 SF ( Why is PAM the default authentication system?)S
0 39.4 M(Security, pure and simple. PAM is the most secure \(or securable\) of the available authentication systems.)S
0 26.2 M(Many of the issues and configuration hints for PAM are contained in README.PAM which is bundled with)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Chapter 7. User Authentication)S
474.768 0 M(25)S
GR
SP
%%Page: 26 26
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(the server source and in the various packaged builds. To use /etc/passwd manual compilation will be required)S
0 673.8 M(with the configure script being run with the --without-pam flag. Unless the PAM subsystem is properly)S
0 660.6 M(configured authentication will fail.)S
/F5 SF 0 634.2 M(2.)S
/F4 SF ( Authentication methods supported)S
11 607.8 M(PAM)S
/Fc SF 3.19 607.8 M(\267 )S
/F4 SF 11 594.6 M(Standard /etc/passwd lookups)S
/Fc SF 3.19 594.6 M(\267 )S
/F4 SF 11 581.4 M(NIS)S
/Fc SF 3.19 581.4 M(\267 )S
/F4 SF 11 568.2 M(Shadow passwords)S
/Fc SF 3.19 568.2 M(\267 )S
/F4 SF 11 555 M(Indvidual passwd/group files for each virtual)S
/Fc SF 3.19 555 M(\267 )S
/F4 SF 11 541.8 M(SQL databases)S
/Fc SF 3.19 541.8 M(\267 )S
/F4 SF 0 515.4 M(If these don't fit in with your system then writing a custom module or using such as the "ld.so.preload")S
0 502.2 M(approach to intercept getpwbynam\(\) system calls works happily with ProFTPD.)S
/F5 SF 0 475.8 M(3.)S
/F4 SF ( Problems with non-PAM authentication)S
0 449.4 M(Generally these problems will be cured by either disabling PAM completely or by ensuring that these)S
0 436.2 M(directives are set)S
9 FS/F0 SF 0 411.8 M(PersistentPasswd   off)S
0 401 M(AuthPAMAuthoritative off)S
11 FS/F5 SF 0 364.2 M(4.)S
/F4 SF ( AuthPAMAuthorative is an unknown directive!)S
0 337.8 M(Check the spelling it should be AuthPAMAuthoritative not AuthPAMAuthorative or any other variation.)S
/F5 SF 0 311.4 M(5.)S
/F4 SF ( Configuring PAM)S
0 285 M(There is a README.Pam in the top directory of the ProFTPD install directory :)S
14 FS/F9 SF 36 242.4 M(Redhat Linux)S
9 FS/F0 SF 36 217.4 M(#%PAM-1.0)S
36 206.6 M(auth       required     /lib/security/pam_listfile.so item=user)S
36 195.8 M(sense=deny file=/etc/ftpusers onerr=succeed)S
36 185 M(auth       required     /lib/security/pam_pwdb.so shadow nullok)S
36 174.2 M(account    required     /lib/security/pam_pwdb.so)S
36 163.4 M(session    required     /lib/security/pam_pwdb.so)S
14 FS/F9 SF 36 123.6 M(SuSE Linux)S
11 FS/F4 SF 36 96.6 M(SuSE appears to uses pam_unix rather than pam_pwdb which is the Redhat approach. All)S
36 83.4 M(references to pam_pwdb should be replaced with "pam_unix" on SuSE systems.)S
36 57 M(The following fragment is reported to work fine on SuSE 6.2)S
9 FS/F0 SF 36 32.6 M(/etc/pam.d/ftpd)S
11 FS/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(Redhat Linux)S
474.768 0 M(26)S
GR
SP
%%Page: 27 27
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
9 FS/F0 SF 36 689 M(#%PAM-1.0)S
36 667.4 M(# Uncomment this to achieve what used to be ftpd -A.)S
36 656.6 M(# auth       required     /lib/security/pam_listfile.so item=user sense=allow file=/etc/ftpchroot onerr=fail)S
36 635 M(auth     required       /lib/security/pam_listfile.so item=user)S
36 624.2 M(sense=deny file=/etc/ftpusers onerr=succeed)S
36 613.4 M(auth     sufficient     /lib/security/pam_ftp.so)S
36 602.6 M(auth     required       /lib/security/pam_unix.so)S
36 591.8 M(auth     required       /lib/security/pam_shells.so)S
36 581 M(account  required       /lib/security/pam_unix.so)S
36 570.2 M(password required       /lib/security/pam_unix.so)S
36 559.4 M(session  required       /lib/security/pam_unix.so)S
14 FS/F9 SF 36 519.6 M(FreeBSD)S
11 FS/F4 SF 36 492.6 M(FreeBSD does not support PAM session directives. If you remove the following line from the)S
36 479.4 M(FreeBSD section of README.PAM, PAM should work properly under recent versions of)S
36 466.2 M(FreeBSD.)S
9 FS/F0 SF 36 441.8 M( ftp session required    pam_unix.so         try_first_pass)S
11 FS/F5 SF 0 405 M(6.)S
/F4 SF ( Normal users can't login, only anon.)S
0 378.6 M(Check that the /etc/pam.d/ftp file exists on the system and is configured as detailed in README.PAM)S
/F5 SF 0 352.2 M(7.)S
/F4 SF ( AuthPAMAuthoritative)S
0 325.8 M(Currently AuthPAMAuthoritative defaults on "ON" resulting in login failures if PAM cannot authenticate the)S
0 312.6 M(user. This breaks the AuthUserFile directive as it never gets a chance to authenticate the user unless the)S
0 299.4 M(AuthPAMAuthoritative directive is set to "OFF")S
0 273 M(The reasoning behind the current default is to ensure that the system is secure by default requiring that the)S
0 259.8 M(admin explicitly and knowingly has to disable it. There are discussions underway which may result in the)S
0 246.6 M(directive flipping to a default of "Off" if AuthUserFile is specified.)S
/F6 SF 0 220.2 M(Note:)S
/F4 SF ( as of the current CVS and the forthcoming pre9 release the default has changed to "Off")S
/F5 SF 0 193.8 M(8.)S
/F4 SF ( LDAP)S
0 167.4 M(mod_ldap is part of the core distribution.)S
/F5 SF 0 141 M(9.)S
/F4 SF ( One time passwords)S
0 114.6 M(This is possible using either PAM or the Opie modules. The module passes back a challenge which the user)S
0 101.4 M(puts into a key generator along with their "pass phrase" and it gives them back 5 words which get sent as the)S
0 88.2 M(password. As long as you do it correctly it will never repeat.)S
0 61.8 M(It requires http://inner.net/opie/ to be installed on the server. There are key gen clients for win95/98, *nix,)S
0 48.6 M(mac.)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(FreeBSD)S
474.768 0 M(27)S
GR
SP
%%Page: 28 28
%%PageBoundingBox: 72 36 559 756
GS
72 36 T
11 FS/F4 SF 0 687 M(ftp://ftp.urbanrage.com/pub/c/mod_opie.c)S
/F5 SF 0 660.6 M(10.)S
/F4 SF ( RADIUS)S
0 634.2 M(The new mod_radius module provides RADIUS authentication and accounting support to ProFTPD.)S
/F5 SF 0 607.8 M(11.)S
/F4 SF ( Anonymous password checking)S
0 581.4 M(Is it possible to check an offered email address in an anonymous login before allowing access. Simple answer,)S
0 568.2 M(not a hope in hell, anonymous access is pretty much designed to be freely open without checks and)S
0 555 M(restrictions other than those placed on upload/download from the site. The best that can be hoped for is decent)S
0 541.8 M(logging and tracking of accesses, and the requesting IP.)S
/F5 SF 0 515.4 M(12.)S
/F4 SF ( Why do I see "PAM\(name\): Authentication failure", but I can login anyway?)S
0 489 M(If the operating system supports PAM \(Pluggable Authentication Modules\) proftpd will perform PAM)S
0 475.8 M(authentication by default. However, this authentication is not "authoritative" by default, meaning that a PAM)S
0 462.6 M(authentication failure will not necessary cause a login to fail. The use of PAM can be configured using the)S
0 449.4 M(AuthPAM configuration directive; the "authoritativeness" of any PAM checks is controlled via the)S
0 436.2 M(AuthPAMAuthoritative configuration directive.)S
/F8 SF 166.17 709 M(Professional FTP Daemon FAQ)S
0 0 M(FreeBSD)S
474.768 0 M(28)S
GR
SP
%%Trailer
%%EOF
